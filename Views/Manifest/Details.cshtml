@model SMS.Models.Manifest
@{
    ViewData["Title"] = "Manifest Details";
    Layout = "~/Views/Shared/AdminLTE/_Layout.cshtml";
}

<div class="card shadow mb-4">
    <div class="card-header">
        <h4 class="m-0 font-weight-bold text-primary">Manifest Details: @Model.ManifestId</h4>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h5>Manifest Information</h5>
                <dl class="row">
                    <dt class="col-sm-5">Departure:</dt>
                    <dd class="col-sm-7">@Model.DepartureLocation.State.Name ==> @Model.DepartureLocation.Name</dd>
                    <dt class="col-sm-5">Destination:</dt>
                    <dd class="col-sm-7">@Model.DestinationLocation.State.Name ==> @Model.DestinationLocation.Name</dd>
                    <dt class="col-sm-5">Date Created:</dt>
                    <dd class="col-sm-7">@Model.DateCreated.ToString("yyyy-MM-dd HH:mm")</dd>
                    <dt class="col-sm-5">Created By:</dt>
                    <dd class="col-sm-7">@Model.CreatedBy</dd>
                </dl>
            </div>
            <div class="col-md-6">
                <h5>Dispatch Information</h5>
                @if(Model.IsSignedOff)
                {
                    <dl class="row">
                        <dt class="col-sm-5">Status:</dt>
                        <dd class="col-sm-7"><span class="badge badge-success">Dispatched</span></dd>
                        <dt class="col-sm-5">Dispatched By:</dt>
                        <dd class="col-sm-7">@Model.DispatchedBy</dd>
                        <dt class="col-sm-5">Dispatch Date:</dt>
                        <dd class="col-sm-7">@Model.DispatchedDate?.ToString("yyyy-MM-dd HH:mm")</dd>
                        <dt class="col-sm-5">Driver:</dt>
                        <dd class="col-sm-7">@Model.Driver?.FirstName @Model.Driver?.LastName</dd>
                        <dt class="col-sm-5">Vehicle:</dt>
                        <dd class="col-sm-7">@Model.Vehicle?.PlateNumber</dd>
                        <dt class="col-sm-5">Dispatch Fee:</dt>
                        <dd class="col-sm-7">@Model.DispatchFee.ToString("C")</dd>
                    </dl>
                }
                else
                {
                    <p><span class="badge badge-warning">Pending Dispatch</span></p>
                }
            </div>
        </div>

        <hr />
        <h5>Shipments on this Manifest (@Model.ManifestShipments.Count)</h5>
        <table class="table table-bordered table-sm">
            <thead><tr><th>Waybill Number</th></tr></thead>
            <tbody>
            @foreach (var item in Model.ManifestShipments)
            {
                <tr><td>@item.WaybillNumber</td></tr>
            }
            </tbody>
        </table>

        <div class="mt-4">
            <a asp-action="ManifestList" class="btn btn-secondary">Back to List</a>
        </div>
    </div>
</div>